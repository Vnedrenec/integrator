<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API-ключи - BPM Centr</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Roboto+Condensed:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body class="dashboard-page">
    <!-- Шапка -->
    <header>
        <div class="container header-container">
            <div class="logo">BPM Centr</div>
            <ul class="nav-menu">
                <li><a href="../index.html">Главная</a></li>
                <li><a href="connectors.html">Коннекторы</a></li>
                <li><a href="pricing.html">Цены</a></li>
                <li><a href="documentation.html">Документация</a></li>
                <li><a href="about.html">О нас</a></li>
            </ul>
            <div class="auth-buttons">
                <div class="user-dropdown-toggle">
                    Иван Иванов <i class="fas fa-chevron-down"></i>
                </div>
            </div>
        </div>
    </header>

    <!-- Основной контент -->
    <section class="section">
        <div class="container">
            <div class="row dashboard-container" id="dashboard-container">
                <!-- Боковое меню -->
                <div class="col-3" id="sidebar-col">
                    <div class="sidebar" id="sidebar">
                        <button class="sidebar-toggle" id="sidebar-toggle" title="Свернуть/развернуть меню">
                            <i class="fas fa-bars"></i>
                        </button>
                        <ul class="sidebar-menu">
                            <li><a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> <span>Дашборд</span></a></li>
                            <li><a href="user-connectors.html"><i class="fas fa-plug"></i> <span>Мои коннекторы</span></a></li>
                            <li><a href="user-subscriptions.html"><i class="fas fa-credit-card"></i> <span>Подписки</span></a></li>
                            <li><a href="user-api-keys.html" class="active"><i class="fas fa-key"></i> <span>API-ключи</span></a></li>
                            <li><a href="user-analytics.html"><i class="fas fa-chart-bar"></i> <span>Аналитика</span></a></li>
                            <li><a href="user-profile.html"><i class="fas fa-user"></i> <span>Профиль</span></a></li>
                            <li><a href="contacts.html"><i class="fas fa-headset"></i> <span>Поддержка</span></a></li>
                        </ul>
                    </div>
                </div>

                <!-- Основной контент -->
                <div class="col-9 dashboard-content">
                    <div class="dashboard-welcome">
                        <h1>Управление API-ключами</h1>
                    </div>

                    <div class="dashboard-section">
                        <div class="card">
                            <h2>Ваши API-ключи</h2>
                            <p>API-ключи используются для доступа к коннекторам в вашем аккаунте Make. Каждый коннектор имеет свой уникальный API-ключ.</p>

                            <div class="alert alert-info" style="margin: 15px 0;">
                                <strong>Важно!</strong> Храните ваши API-ключи в безопасности. Не передавайте их третьим лицам.
                            </div>

                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Коннектор</th>
                                        <th>API-ключ</th>
                                        <th>Статус</th>
                                        <th>Аккаунт Make</th>
                                        <th>Действия</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Маркетплейс Коннектор</td>
                                        <td>
                                            <div style="display: flex; align-items: center;">
                                                <span style="flex: 1; overflow: hidden; text-overflow: ellipsis;">••••••••••••••••••••••••</span>
                                                <button class="btn btn-secondary" style="margin-left: 10px; padding: 3px 8px; font-size: 12px;">Показать</button>
                                                <button class="btn btn-secondary" style="margin-left: 5px; padding: 3px 8px; font-size: 12px;">Копировать</button>
                                            </div>
                                        </td>
                                        <td><span class="badge badge-primary">Активен</span></td>
                                        <td>
                                            <div style="display: flex; align-items: center;">
                                                <span>account_123456</span>
                                                <button class="btn btn-secondary" style="margin-left: 10px; padding: 3px 8px; font-size: 12px;" data-modal="change-account-modal-1">Изменить</button>
                                            </div>
                                        </td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 3px 8px; font-size: 12px;">Обновить ключ</button>
                                            <button class="btn btn-danger" style="padding: 3px 8px; font-size: 12px;">Отозвать</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Платежный Коннектор</td>
                                        <td>
                                            <div style="display: flex; align-items: center;">
                                                <span style="flex: 1; overflow: hidden; text-overflow: ellipsis;">••••••••••••••••••••••••</span>
                                                <button class="btn btn-secondary" style="margin-left: 10px; padding: 3px 8px; font-size: 12px;">Показать</button>
                                                <button class="btn btn-secondary" style="margin-left: 5px; padding: 3px 8px; font-size: 12px;">Копировать</button>
                                            </div>
                                        </td>
                                        <td><span class="badge badge-primary">Активен</span></td>
                                        <td>
                                            <div style="display: flex; align-items: center;">
                                                <span>account_789012</span>
                                                <button class="btn btn-secondary" style="margin-left: 10px; padding: 3px 8px; font-size: 12px;" data-modal="change-account-modal-2">Изменить</button>
                                            </div>
                                        </td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 3px 8px; font-size: 12px;">Обновить ключ</button>
                                            <button class="btn btn-danger" style="padding: 3px 8px; font-size: 12px;">Отозвать</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <div class="card">
                            <h2>Информация о привязке к аккаунтам Make</h2>
                            <p>Каждый коннектор может быть привязан к отдельному аккаунту Make. Это позволяет использовать разные коннекторы в разных аккаунтах Make или предоставлять доступ к коннекторам разным клиентам.</p>

                            <div class="alert alert-info" style="margin: 15px 0;">
                                <strong>Важно!</strong> При смене аккаунта Make для коннектора, он будет автоматически отключен в предыдущем аккаунте и активирован в новом.
                            </div>

                            <p>Для изменения аккаунта Make для конкретного коннектора нажмите кнопку "Изменить" в соответствующей строке таблицы.</p>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <div class="card">
                            <h2>Инструкция по использованию API-ключей</h2>
                            <ol>
                                <li>Скопируйте API-ключ для нужного коннектора.</li>
                                <li>Убедитесь, что коннектор привязан к правильному аккаунту Make (при необходимости измените аккаунт).</li>
                                <li>В Make.com создайте новый сценарий или откройте существующий в соответствующем аккаунте.</li>
                                <li>Добавьте модуль с коннектором BPM Centr.</li>
                                <li>При первом использовании коннектора вам будет предложено ввести API-ключ.</li>
                                <li>Вставьте скопированный API-ключ и нажмите "Сохранить".</li>
                                <li>Теперь вы можете использовать коннектор в своих сценариях.</li>
                            </ol>
                            <div class="alert alert-info" style="margin: 15px 0;">
                                <strong>Примечание:</strong> Каждый API-ключ привязан к конкретному коннектору и может использоваться только в том аккаунте Make, который указан в таблице. Если вы хотите использовать коннектор в другом аккаунте Make, измените привязку аккаунта.
                            </div>
                            <p>Подробную инструкцию по использованию коннекторов вы можете найти в <a href="documentation.html">документации</a>.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Подвал -->
    <footer>
        <div class="container footer-container">
            <div class="logo">BPM Centr</div>
            <ul class="footer-links">
                <li><a href="contacts.html">Контакты</a></li>
                <li><a href="terms.html">Правовая информация</a></li>
                <li><a href="privacy.html">Политика конфиденциальности</a></li>
            </ul>
            <ul class="social-links">
                <li><a href="#"><i class="fab fa-facebook"></i></a></li>
                <li><a href="#"><i class="fab fa-twitter"></i></a></li>
                <li><a href="#"><i class="fab fa-linkedin"></i></a></li>
            </ul>
            <div class="copyright">
                © 2025 BPM Centr. Все права защищены.
            </div>
        </div>
    </footer>

    <!-- Модальное окно для изменения аккаунта Make для первого коннектора -->
    <div id="change-account-modal-1" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Изменение аккаунта Make для Маркетплейс Коннектора</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p style="font-size: 14px; margin-bottom: 15px;">Введите идентификатор аккаунта Make, к которому вы хотите привязать коннектор. После изменения аккаунта коннектор будет автоматически отключен в предыдущем аккаунте и активирован в новом.</p>

                <form>
                    <div class="form-group">
                        <label for="current-account-1" class="form-label">Текущий аккаунт Make</label>
                        <input type="text" id="current-account-1" class="form-control" value="account_123456" disabled>
                    </div>
                    <div class="form-group">
                        <label for="new-account-1" class="form-label">Новый аккаунт Make</label>
                        <input type="text" id="new-account-1" class="form-control" placeholder="Введите идентификатор аккаунта Make">
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">Изменить аккаунт</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Модальное окно для изменения аккаунта Make для второго коннектора -->
    <div id="change-account-modal-2" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Изменение аккаунта Make для Платежного Коннектора</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p style="font-size: 14px; margin-bottom: 15px;">Введите идентификатор аккаунта Make, к которому вы хотите привязать коннектор. После изменения аккаунта коннектор будет автоматически отключен в предыдущем аккаунте и активирован в новом.</p>

                <form>
                    <div class="form-group">
                        <label for="current-account-2" class="form-label">Текущий аккаунт Make</label>
                        <input type="text" id="current-account-2" class="form-control" value="account_789012" disabled>
                    </div>
                    <div class="form-group">
                        <label for="new-account-2" class="form-label">Новый аккаунт Make</label>
                        <input type="text" id="new-account-2" class="form-control" placeholder="Введите идентификатор аккаунта Make">
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">Изменить аккаунт</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="../js/main.js"></script>
    <script src="../js/user-dropdown.js"></script>
    <script>
        // Функция для работы с модальными окнами
        document.addEventListener('DOMContentLoaded', function() {
            // Получаем все кнопки, которые открывают модальные окна
            const modalButtons = document.querySelectorAll('[data-modal]');

            // Добавляем обработчик клика для каждой кнопки
            modalButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Получаем ID модального окна из атрибута data-modal
                    const modalId = this.getAttribute('data-modal');
                    const modal = document.getElementById(modalId);

                    // Открываем модальное окно
                    if (modal) {
                        modal.style.display = 'block';
                    }
                });
            });

            // Получаем все кнопки закрытия модальных окон
            const closeButtons = document.querySelectorAll('.modal-close');

            // Добавляем обработчик клика для каждой кнопки закрытия
            closeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Находим ближайшее модальное окно и закрываем его
                    const modal = this.closest('.modal');
                    if (modal) {
                        modal.style.display = 'none';
                    }
                });
            });

            // Закрываем модальное окно при клике вне его содержимого
            window.addEventListener('click', function(event) {
                if (event.target.classList.contains('modal')) {
                    event.target.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>
